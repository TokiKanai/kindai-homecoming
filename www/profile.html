<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="cordova.js"></script>
    <link rel="stylesheet" href="css/profile.css">
    <script>
        // ä»®ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä¿å­˜
let storedPassword = "password123"; // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç™»éŒ²ã—ãŸå…ƒã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰

document.addEventListener("DOMContentLoaded", function() {

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼åç·¨é›†æ©Ÿèƒ½
    document.querySelector('.edit-icon').addEventListener('click', function() {
        document.getElementById('display-username').style.display = 'none'; // ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤ºéè¡¨ç¤º
        document.getElementById('username-input').style.display = 'block';  // å…¥åŠ›æ¬„è¡¨ç¤º
        document.getElementById('update-username-btn').style.display = 'block';  // æ›´æ–°ãƒœã‚¿ãƒ³è¡¨ç¤º
    });

    document.getElementById('update-username-btn').addEventListener('click', function() {
        const newUsername = document.getElementById('username-input').value;
        document.getElementById('display-username').textContent = newUsername + ' ğŸ–Š'; // ãƒ¦ãƒ¼ã‚¶ãƒ¼åã«ãƒšãƒ³ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ 
        document.getElementById('display-username').style.display = 'block'; // ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤º
        document.getElementById('username-input').style.display = 'none'; // å…¥åŠ›æ¬„éè¡¨ç¤º
        document.getElementById('update-username-btn').style.display = 'none'; // æ›´æ–°ãƒœã‚¿ãƒ³éè¡¨ç¤º
    });

    // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ›´æ–°ã™ã‚‹æ©Ÿèƒ½
    document.getElementById('update-email-btn').addEventListener('click', function() {
        const emailInput = document.getElementById('email-input').value;
        document.getElementById('display-email').textContent = emailInput; // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¡¨ç¤ºã™ã‚‹ç®‡æ‰€ã«åæ˜ 
        document.getElementById('email-message').textContent = "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ";
        document.getElementById('email-message').style.color = "green"; // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç·‘ã§è¡¨ç¤º
    });

    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›´æ–°ã™ã‚‹æ©Ÿèƒ½
    document.getElementById('update-password-btn').addEventListener('click', function() {
        const oldPasswordInput = document.getElementById('old-password').value;
        const newPasswordInput = document.getElementById('new-password').value;

        // å…ƒã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯
        if (oldPasswordInput === storedPassword) {
            // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ–°ã—ã„ã‚‚ã®ã«å¤‰æ›´
            storedPassword = newPasswordInput;
            document.getElementById('password-message').textContent = "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£å¸¸ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸï¼";
            document.getElementById('password-message').style.color = "green";
        } else {
            // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            document.getElementById('password-message').textContent = "å…ƒã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚";
            document.getElementById('password-message').style.color = "red";
        }
    });

    // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
    document.getElementById("logout-btn").addEventListener("click", function () {
        if (confirm("æœ¬å½“ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ")) {
            // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã®å®Ÿè¡Œ
            executeLogout();
        }
    });

    // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤æ©Ÿèƒ½
    document.getElementById("delete-account-btn").addEventListener("click", function () {
        if (confirm("æœ¬å½“ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) {
            // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ
            executeAccountDeletion();
        }
    });

});

// ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°
function executeLogout() {
    // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ï¼ˆä»®: ã‚µãƒ¼ãƒãƒ¼ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ç„¡åŠ¹åŒ–ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ãªã©ï¼‰
    console.log("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸã€‚");

    // ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    redirectToLogin();
}

// ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°
function executeAccountDeletion() {
    // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤å‡¦ç†ï¼ˆä»®: ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ãªã©ï¼‰
    console.log("ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚");

    // ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    redirectToLogin();
}

// ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹é–¢æ•°
function redirectToLogin() {
    // ã“ã“ã§ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã®URLã‚’æŒ‡å®š
    const loginPageURL = "login.html"; // ä»®ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸URL
    window.location.href = loginPageURL;
}
    </script>
</head>
<body>
    <div class="container">
        <h1>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h1>
        <hr class="hr1">

        <!-- è§’ã®ä¸¸ã„å››è§’å½¢ -->
        <div class="rounded-box">
            <div class="profile-content">
                <div class="profile-image">
                    <img id="profile-pic" src="usericon.png" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ">
                </div>
                <div class="profile-details">
                    <p id="display-username">å±±ç”°å¤ªéƒ <span class="edit-icon">ğŸ–Š</span></p> <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒšãƒ³ã‚¢ã‚¤ã‚³ãƒ³ -->
                    <input type="text" id="username-input" style="display: none;" placeholder="æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›"> <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼åå…¥åŠ›æ¬„ -->
                    <button id="update-username-btn" style="display: none;">æ›´æ–°</button> <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼åæ›´æ–°ãƒœã‚¿ãƒ³ -->
                    <p id="display-email">yamada@example.com</p> <!-- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¡¨ç¤ºã™ã‚‹ç®‡æ‰€ -->
                </div>
            </div>
        </div>

        <h2>ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±</h2>
        <hr class="hr2">

        <div class="mail-detail">
            <label for="email-input">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
            <input type="email" id="email-input" value="yamada@example.com">
            <button id="update-email-btn">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ›´æ–°</button>
            <p id="email-message" class="message"></p> <!-- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æ›´æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        </div>

        <div class="password-detail">
            <label for="old-password">å…ƒã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
            <input type="password" id="old-password" placeholder="å…ƒã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
            
            <label for="new-password">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
            <input type="password" id="new-password" placeholder="æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
            <button id="update-password-btn">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›´æ–°</button>
            <p id="password-message" class="message"></p> <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ›´æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
             <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ›´æ–°ãƒœã‚¿ãƒ³ã®ä¸‹ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ãƒœã‚¿ãƒ³ã‚’è¿½åŠ  -->
        <div class="logout-account-group">
            <button id="logout-btn" class="danger-btn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            <button id="delete-account-btn" class="danger-btn">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤</button>
        </div>

        </div>

        
        

    </div>
</body>

    <div id="footer"></div>
        <script>
            fetch('footer.html')
                .then(response => response.text())
                .then(data => document.getElementById('footer').innerHTML = data)
                .catch(error => console.log('Error loading footer:', error));
        </script>
</html>
